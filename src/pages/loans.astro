---
import Layout from '../layouts/Layout.astro'
import TableComponent from '../components/table/Table.astro'
import LoanRow from '../components/table/Loan.astro'
import type { Loan } from '../types/ExpenseTrackerTypes'
import { apiUrl } from '../utils/Utilities'

const response = await fetch(`${apiUrl()}/expenses`)
const data = await response.json()
---

<Layout title="Expense Tracker: Manage your loans">
	<TableComponent isLoan={true}>
		{data.map((loan: Loan) => <LoanRow loan={loan} />)}
	</TableComponent>
</Layout>
